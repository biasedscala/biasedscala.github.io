<!DOCTYPE html>
<html xmlns="http://www.w3.org/1999/xhtml" xml:lang="en-us" lang="en-us">
<head>
  <link href="https://gmpg.org/xfn/11" rel="profile">
  <meta http-equiv="content-type" content="text/html; charset=utf-8">
  <meta name="generator" content="Hugo 0.88.1" />

  
  <meta name="viewport" content="width=device-width, initial-scale=1.0">

  <title>BiasedScala: I like Future more than yesterday &middot; Biased Scala</title>
  <meta name="description" content="" />

  
  <link type="text/css" rel="stylesheet" href="https://biasedscala.github.io/css/print.css" media="print">
  <link type="text/css" rel="stylesheet" href="https://biasedscala.github.io/css/poole.css">
  <link type="text/css" rel="stylesheet" href="https://biasedscala.github.io/css/syntax.css">
  <link type="text/css" rel="stylesheet" href="https://biasedscala.github.io/css/hyde.css">
    <link rel="stylesheet" href="https://fonts.googleapis.com/css?family=Abril+Fatface|PT+Sans:400,400i,700">


  
  <link rel="apple-touch-icon-precomposed" sizes="144x144" href="/apple-touch-icon-144-precomposed.png">
  <link rel="shortcut icon" href="/favicon.png">

  
  
</head>

  <body class="theme-base-08 ">
  <aside class="sidebar">
  <div class="container sidebar-sticky">
    <div class="sidebar-about">
      <a href="https://biasedscala.github.io/"><h1>Biased Scala</h1></a>
      <p class="lead">
       My Baised Opinion on Scala 
      </p>
    </div>

    <nav>
      <ul class="sidebar-nav">
        <li><a href="https://biasedscala.github.io/">Home</a> </li>
        <li><a href="https://afoo.me"> Blog </a></li><li><a href="https://github.com/fujohnwang/"> Github </a></li><li><a href="https://www.linkedin.com/in/fujohnwang/"> LinkedIn </a></li><li><a href="https://twitter.com/fujohnwang"> Twitter </a></li>
      </ul>
    </nav>

    <p>&copy; 2021. All rights reserved. </p>
  </div>
</aside>

    <main class="content container">
    <div class="post">
  <h1>BiasedScala: I like Future more than yesterday</h1>
  <time datetime=2021-10-15T08:47:11&#43;0100 class="post-date">Fri, Oct 15, 2021</time>
  <p><img src="images/cover.jpg" alt=""></p>
<p>Although we have <strong>Executor/ExecutorService</strong>, even <strong>ForkJoinPool</strong>, most of the time, I only use Scala&rsquo;s <strong>Future</strong> instead. Not because others are not excellent or no good, just because I feel natural to use Future.</p>
<p>I had said, if the syntax of a programming language is the taste of it, then I like scala&rsquo;s taste  and stick with it. Same same, I like <strong>Future</strong> style instead of <code>submit(task)</code> or <code>execute(runnable)</code> styles, although the underneath mechanism is almost a same.</p>
<p>One of the scenarios I would like to use scala <strong>Future</strong> is where I use Vert.x to create some HTTP API. Since Vert.x advocates to write async code, and if the processing of IO or business logic takes too long, it will warn explicitly via <code>io.vertx.core.impl.BlockedThreadChecker</code>, so usually, I will wrap the processing in a <strong>Future</strong> block:</p>
<div class="highlight"><pre tabindex="0" style="color:#f8f8f2;background-color:#272822;-moz-tab-size:4;-o-tab-size:4;tab-size:4"><code class="language-scala" data-lang="scala">    <span style="color:#66d9ef">if</span> <span style="color:#f92672">(</span>channelRepository<span style="color:#f92672">.</span>channels<span style="color:#f92672">.</span>containsKey<span style="color:#f92672">(</span>channelId<span style="color:#f92672">))</span> <span style="color:#f92672">{</span>
        <span style="color:#a6e22e">Future</span> <span style="color:#f92672">{</span>
            logger<span style="color:#f92672">.</span>info<span style="color:#f92672">(</span><span style="color:#e6db74">s&#34;push message: </span><span style="color:#e6db74">${</span>pushPayload<span style="color:#e6db74">}</span><span style="color:#e6db74"> with channel: </span><span style="color:#e6db74">$channelId</span><span style="color:#e6db74">&#34;</span><span style="color:#f92672">)</span>
            channelRepository<span style="color:#f92672">.</span>channels<span style="color:#f92672">.</span>get<span style="color:#f92672">(</span>channelId<span style="color:#f92672">).</span>send<span style="color:#f92672">(</span>pushPayload<span style="color:#f92672">)</span>
        <span style="color:#f92672">}</span>
        ctx<span style="color:#f92672">.</span>response<span style="color:#f92672">().</span>end<span style="color:#f92672">()</span>
    <span style="color:#f92672">}</span> <span style="color:#66d9ef">else</span> <span style="color:#f92672">{</span>
        <span style="color:#66d9ef">throw</span> <span style="color:#66d9ef">new</span> <span style="color:#a6e22e">IllegalArgumentException</span><span style="color:#f92672">(</span><span style="color:#e6db74">s&#34;no channel with id=</span><span style="color:#e6db74">${</span>channelId<span style="color:#e6db74">}</span><span style="color:#e6db74"> found as per the push request.&#34;</span><span style="color:#f92672">)</span>
    <span style="color:#f92672">}</span>
</code></pre></div><p>fire and forget, fucking easy!</p>
<p>OK, I admit I am not telling you the whole story,  In fact, Future block needs some implicit <strong>ExecutionContext</strong> available in context, so we have to <code>import scala.concurrent.ExecutionContext.Implicits.global</code> in the beginning or some where before <strong>Future</strong> block is used. Of course, we can create some ExecutionContext by ourselves, and implicitly import it when using <strong>Future</strong> block, but since <code>import scala.concurrent.ExecutionContext.Implicits.global</code> is available, I don&rsquo;t think it&rsquo;s necessary anymore, most of the time, one global ExecutionContext will be cool.</p>
<p>In Scala3, we can provide an implicit dependency with <code>given</code>, that&rsquo;s will be another story, stay tuned.</p>

</div>


    </main>

    
      
    
  </body>
</html>
